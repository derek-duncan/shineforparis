!function(){var t=function(t,n){var e,o=window.app,i=!1;t.onmouseover=function(){i||(n.className+=" icon--grow",e=setTimeout(function(){i=!0,t.className+=" done",o.socket.emit("light it up","I AM HERE")},1e3))},t.onmouseout=function(){i||(n.className=n.className.replace("icon--grow",""),clearTimeout(e))}},n=function(){var t=document.querySelector(".counter"),n=t.querySelector(".count"),e=Number(n.innerHTML);e++,n.innerHTML=e,n.className+=" flash",setTimeout(function(){n.className=n.className.replace(/flash/g,"")},100)},e=function(){var t=document.querySelector(".lights"),e=5,o=10,i=0,a=window.innerWidth,r=0,c=window.innerHeight,u=[],l=function(t){for(var n=0,e=0;e<u.length;e++){var o=u[e];if(!(t.x+t.width<o.x||o.x+o.width<t.x||t.y+t.height<o.y||o.y+o.height<t.y)){var i=Math.max(t.x,o.x),a=Math.max(t.y,o.y),r=Math.min(t.x+t.width,o.x+o.width),c=Math.min(t.y+t.height,o.y+o.height),l=(i-r)*(a-c);n+=l}}return n},s=function(t){return setTimeout(function(){t.className+=" light--pulse"},Math.floor(2e3*Math.random())+1)},h=function(h,d){h=h||1,u.splice(0,u.length);for(var m=0;h>m;++m){for(var f,p,g=0,w=0,y=9007199254740992,v=0;o>v;++v){g=Math.round(i+(a-i)*(Math.random()%1)),w=Math.round(r+(c-r)*(Math.random()%1)),p={x:g,y:w,width:e,height:e};var M=l(p);if(y>M&&(y=M,f=p),0===M)break}u.push(f);var x=document.createElement("span");x.innerHTML="&nbsp",x.className="light "+d,x.style.top=w+"px",x.style.left=g+"px",s(x),n(),t.appendChild(x)}},d=function(t){h(t)};return{init:d,add:h}},o=function(){var n=window.app,o=document.querySelector(".heartButton"),i=o.querySelector(".icon--filled"),a=e();n.socket.on("init",function(t){var n=t.length;a.init(n)}),n.socket.on("already lit up",function(t){i.className+=" icon--grow done",a.add(1,"light--local")}),n.socket.on("lit up",function(t){a.add(1,"light--local")}),n.socket.on("someone lit it up",function(t){a.add(1,"light--remote")}),t(o,i)},i=function(t){return t},a={init:o,socket:io()},r=i(a);window.app=r,window.addEventListener("load",r.init,!1)}();