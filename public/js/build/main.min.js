!function(){var t=function(t,n){var e,i=window.app,o=!1;t.onmouseover=function(){o||(n.className+=" icon--grow",e=setTimeout(function(){o=!0,t.className+=" done",i.socket.emit("light it up","I AM HERE")},1e3))},t.onmouseout=function(){o||(n.className=n.className.replace("icon--grow",""),clearTimeout(e))}},n=function(){var t=document.querySelector(".lights"),n=5,e=10,i=0,o=window.innerWidth,a=0,r=window.innerHeight,c=[],u=function(t){for(var n=0,e=0;e<c.length;e++){var i=c[e];if(!(t.x+t.width<i.x||i.x+i.width<t.x||t.y+t.height<i.y||i.y+i.height<t.y)){var o=Math.max(t.x,i.x),a=Math.max(t.y,i.y),r=Math.min(t.x+t.width,i.x+i.width),u=Math.min(t.y+t.height,i.y+i.height),l=(o-r)*(a-u);n+=l}}return n},l=function(t){return setTimeout(function(){t.className+=" light--pulse"},Math.floor(1e3*Math.random())+1)},h=function(h,d){h=h||50,c.splice(0,c.length);for(var s=0;h>s;++s){for(var m,f,p=0,w=0,g=9007199254740992,y=0;e>y;++y){p=Math.round(i+(o-i)*(Math.random()%1)),w=Math.round(a+(r-a)*(Math.random()%1)),f={x:p,y:w,width:n,height:n};var v=u(f);if(g>v&&(g=v,m=f),0===v)break}c.push(m);var x=document.createElement("span");x.innerHTML="&nbsp",x.className="light "+d,x.style.top=w+"px",x.style.left=p+"px",l(x),t.appendChild(x)}},d=function(t){h(t)};return{init:d,add:h}},e=function(){var e=window.app,i=document.querySelector(".heartButton"),o=i.querySelector(".icon--filled"),a=n();e.socket.on("init",function(t){var n=t.length;n=n>=50?n:50,a.init(n)}),e.socket.on("already lit up",function(t){o.className+=" icon--grow done",a.add(1,"light--local")}),e.socket.on("lit up",function(t){a.add(1,"light--local")}),e.socket.on("someone lit it up",function(t){a.add(1,"light--remote")}),t(i,o)},i=function(t){return t},o={init:e,socket:io()},a=i(o);window.app=a,window.addEventListener("load",a.init,!1)}();