!function(){var e=function(e,t){var n,o=window.app,a=!1;e.onmouseover=function(){a||(t.className=t.className.replace(/ icon--bounce/g,""),t.className+=" icon--grow",n=setTimeout(function(){a=!0,e.className+=" done",o.socket.emit("light it up","I AM HERE")},1e3))},e.onmouseout=function(){a||(t.className=t.className.replace(" icon--grow",""),t.className+=" icon--bounce",clearTimeout(n))}},t=function(){var e=document.querySelector(".counter"),t=e.querySelector(".count"),n=Number(t.innerHTML);n++,t.innerHTML=n,t.className+=" flash",setTimeout(function(){t.className=t.className.replace(/flash/g,"")},100)},n=function(){var e=document.querySelector(".lights"),n=5,o=10,a=0,i=window.innerWidth,c=0,r=window.innerHeight,l=[],s=function(e){for(var t=0,n=0;n<l.length;n++){var o=l[n];if(!(e.x+e.width<o.x||o.x+o.width<e.x||e.y+e.height<o.y||o.y+o.height<e.y)){var a=Math.max(e.x,o.x),i=Math.max(e.y,o.y),c=Math.min(e.x+e.width,o.x+o.width),r=Math.min(e.y+e.height,o.y+o.height),s=(a-c)*(i-r);t+=s}}return t},u=function(e){return setTimeout(function(){e.className+=" light--pulse"},Math.floor(2e3*Math.random())+1)},h=function(h,d){h=h||1,l.splice(0,l.length);for(var m=0;h>m;++m){for(var f,p,g=0,w=0,y=9007199254740992,N=0;o>N;++N){g=Math.round(a+(i-a)*(Math.random()%1)),w=Math.round(c+(r-c)*(Math.random()%1)),p={x:g,y:w,width:n,height:n};var v=s(p);if(y>v&&(y=v,f=p),0===v)break}l.push(f);var M=document.createElement("span");M.innerHTML="&nbsp",M.className="light "+d,M.style.top=w+"px",M.style.left=g+"px",u(M),t(),e.appendChild(M)}},d=function(e){h(e)};return{init:d,add:h}},o=function(){var t=window.app,o=document.querySelector(".heartButton"),a=o.querySelector(".icon--filled"),i=document.querySelector(".social"),c=n();t.socket.on("init",function(e){var t=e.length;c.init(t)}),t.socket.on("already lit up",function(e){a.className+=" icon--grow done",i.className=i.className.replace("hide",""),c.add(1,"light--local")}),t.socket.on("lit up",function(e){i.className=i.className.replace("hide",""),c.add(1,"light--local")}),t.socket.on("someone lit it up",function(e){c.add(1,"light--remote")}),e(o,a)},a=function(e){return e},i={init:o,socket:io()},c=a(i);window.app=c,window.addEventListener("load",c.init,!1)}();